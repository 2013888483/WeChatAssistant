# å¾®ä¿¡æ™ºèƒ½åŠ©æ‰‹æ’ä»¶ç³»ç»Ÿ

ä¸€ä¸ªä¸ºæ— ç•ŒBNCRæ¡†æ¶è®¾è®¡çš„æ¨¡å—åŒ–ã€å¯æ‰©å±•çš„å¾®ä¿¡æ™ºèƒ½åŠ©æ‰‹æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¤©æ°”æŸ¥è¯¢ã€AIèŠå¤©ã€APIå·¥å…·ç®±ç­‰å¤šç§åŠŸèƒ½ã€‚

## ä¸»è¦åŠŸèƒ½

- ğŸŒ¤ï¸ **å¤©æ°”æœåŠ¡**ï¼šæŸ¥è¯¢å®æ—¶å¤©æ°”å’Œå¤©æ°”é¢„æŠ¥
- ğŸ¤– **AIèŠå¤©**ï¼šæ”¯æŒå¤šç§AIæ¨¡å‹ï¼ˆDeepSeekã€SiliconFlowã€OpenAIç­‰ï¼‰
- ğŸ”§ **APIå·¥å…·ç®±**ï¼šæä¾›å„ç§å®ç”¨APIæœåŠ¡
- â±ï¸ **æ—©æŠ¥æé†’**ï¼šæ¯æ—¥å®šæ—¶æ¨é€ä¿¡æ¯
- ğŸš€ **ç½‘é€Ÿæµ‹è¯•**ï¼šæµ‹è¯•AIæ¥å£å“åº”é€Ÿåº¦

## å®‰è£…æ–¹æ³•

### å‰ç½®è¦æ±‚

- æ— ç•ŒBNCRæ¡†æ¶ç¯å¢ƒ
- Node.js (å»ºè®®v14.0.0+)

### å®‰è£…æ­¥éª¤

1. è¿›å…¥æ— ç•ŒBNCRæ’ä»¶ç›®å½•
```bash
cd /path/to/æ— ç•ŒBNCR/plugin/
```

2. å…‹éš†ä»“åº“
```bash
git clone https://github.com/2013888483/WeChatAssistant.git
cd WeChatAssistant
```

3. é…ç½®æ–‡ä»¶è®¾ç½®
```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cp config.example.json config.json

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥APIå¯†é’¥ç­‰ä¿¡æ¯
nano config.json
```

4. é‡å¯æ— ç•ŒBNCRæœåŠ¡ï¼Œæ’ä»¶å°†è‡ªåŠ¨åŠ è½½

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€å‘½ä»¤

- `/help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `/plugins list` - åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ’ä»¶
- `/plugins enable <æ’ä»¶å>` - å¯ç”¨æŒ‡å®šæ’ä»¶
- `/plugins disable <æ’ä»¶å>` - ç¦ç”¨æŒ‡å®šæ’ä»¶
- `/plugins reload <æ’ä»¶å>` - é‡æ–°åŠ è½½æ’ä»¶

### å¤©æ°”æœåŠ¡

- `/å¤©æ°” <åŸå¸‚å>` æˆ– `/weather <åŸå¸‚å>` - æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”
- `/å¤©æ°”é…ç½®` æˆ– `/weather_config` - æŸ¥çœ‹å½“å‰å¤©æ°”æœåŠ¡é…ç½®
- `/å¤©æ°”é…ç½® set api <APIç±»å‹>` - è®¾ç½®å¤©æ°”APIç±»å‹ï¼ˆamapæˆ–openweatherï¼‰
- `/å¤©æ°”é…ç½® set key <APIå¯†é’¥>` - è®¾ç½®APIå¯†é’¥
- `/å¤©æ°”é…ç½® set defaultCity <åŸå¸‚å>` - è®¾ç½®é»˜è®¤åŸå¸‚

### AIèŠå¤©

- `/chat <å†…å®¹>` - ä¸AIå¯¹è¯
- `/model list` - æŸ¥çœ‹å¯ç”¨AIæ¨¡å‹
- `/model use <æ¨¡å‹å>` - åˆ‡æ¢AIæ¨¡å‹
- `/model config <æ¨¡å‹å> <å‚æ•°å> <å‚æ•°å€¼>` - è®¾ç½®æ¨¡å‹å‚æ•°

### APIå·¥å…·ç®±

- `/api list` - åˆ—å‡ºæ‰€æœ‰å¯ç”¨API
- `/api <APIåç§°> <å‚æ•°>` - è°ƒç”¨æŒ‡å®šAPI

### æ—©æŠ¥æé†’

- `/morning on` - å¼€å¯æ¯æ—¥æ—©æŠ¥
- `/morning off` - å…³é—­æ¯æ—¥æ—©æŠ¥
- `/morning time <æ—¶é—´>` - è®¾ç½®æ—©æŠ¥æ—¶é—´ï¼Œæ ¼å¼å¦‚ 07:30

## é…ç½®æ–‡ä»¶è¯´æ˜

`config.json` æ–‡ä»¶ç”¨äºå­˜å‚¨æ’ä»¶ç³»ç»Ÿçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬ï¼š

```json
{
  "enabledPlugins": ["weather", "ai-chat", "morning-alert", "api-toolkit", "api-speedtest"],
  "pluginSettings": {
    "weather": {
      "api": "amap",
      "key": "YOUR_API_KEY",
      "defaultCity": "åŒ—äº¬"
    },
    "ai-chat": {
      "defaultModel": "deepseek",
      "models": {
        "deepseek": {
          "name": "DeepSeek",
          "apiKey": "YOUR_API_KEY",
          "enabled": true
        },
        "siliconflow": {
          "name": "SiliconFlow",
          "apiKey": "YOUR_API_KEY",
          "enabled": true,
          "model": "deepseek-ai/DeepSeek-V3"
        },
        "openai": {
          "name": "OpenAI",
          "apiKey": "",
          "enabled": false
        }
      }
    },
    "morning-alert": {
      "enabled": true,
      "time": "07:00"
    }
  },
  "adminUsers": []
}
```

è¯´æ˜ï¼š
- `enabledPlugins`: å·²å¯ç”¨çš„æ’ä»¶åˆ—è¡¨
- `pluginSettings`: å„æ’ä»¶çš„å…·ä½“é…ç½®
- `adminUsers`: ç®¡ç†å‘˜ç”¨æˆ·IDåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ç®¡ç†å‘˜å‘½ä»¤

## æ’ä»¶æœºåˆ¶

è¯¥ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–æ’ä»¶è®¾è®¡ï¼Œæ¯ä¸ªæ’ä»¶éƒ½ç¬¦åˆä»¥ä¸‹ç»“æ„ï¼š

```javascript
module.exports = {
  // æ’ä»¶å…ƒæ•°æ®
  meta: {
    name: "æ’ä»¶åç§°",
    version: "1.0.0",
    description: "æ’ä»¶æè¿°",
    author: "ä½œè€…"
  },
  
  // é»˜è®¤é…ç½®
  defaultConfig: {
    // æ’ä»¶é…ç½®é¡¹
  },
  
  // åˆå§‹åŒ–å‡½æ•°
  initialize: async function(core, pluginConfig) {
    // æ’ä»¶åˆå§‹åŒ–ä»£ç 
    return true;
  },
  
  // å‘½ä»¤å¤„ç†
  onMessage: async function(message) {
    // æ¶ˆæ¯å¤„ç†ä»£ç 
    return response;
  },
  
  // å¸è½½å‡½æ•°
  unload: async function() {
    // æ¸…ç†ä»£ç 
    return true;
  }
};
```

## è‡ªå®šä¹‰å¼€å‘

æ‚¨å¯ä»¥é€šè¿‡å¼€å‘æ–°æ’ä»¶æ¥æ‰©å±•ç³»ç»ŸåŠŸèƒ½ï¼š

1. åœ¨ `plugins/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ’ä»¶ç›®å½•
2. å®ç°ä¸Šè¿°æ’ä»¶ç»“æ„
3. åœ¨ `config.json` çš„ `enabledPlugins` æ•°ç»„ä¸­æ·»åŠ æ’ä»¶åç§°
4. é‡å¯æ— ç•ŒBNCRæ¡†æ¶æˆ–ä½¿ç”¨ `/plugins reload <æ’ä»¶å>` å‘½ä»¤åŠ è½½æ’ä»¶

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•æ·»åŠ æ–°çš„ç®¡ç†å‘˜ï¼Ÿ**  
A: ç¼–è¾‘ `config.json` æ–‡ä»¶ï¼Œåœ¨ `adminUsers` æ•°ç»„ä¸­æ·»åŠ ç”¨æˆ·IDã€‚

**Q: æ’ä»¶ä¸å·¥ä½œæ€ä¹ˆåŠï¼Ÿ**  
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤æ’ä»¶åœ¨ `enabledPlugins` åˆ—è¡¨ä¸­
2. æŸ¥çœ‹æ’ä»¶é…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆç‰¹åˆ«æ˜¯APIå¯†é’¥ï¼‰
3. ä½¿ç”¨ `/plugins reload <æ’ä»¶å>` é‡æ–°åŠ è½½æ’ä»¶
4. æ£€æŸ¥æ— ç•ŒBNCRçš„æ—¥å¿—è¾“å‡º

**Q: å¦‚ä½•æ›´æ–°æ’ä»¶ç³»ç»Ÿï¼Ÿ**  
A: è¿›å…¥æ’ä»¶ç›®å½•ï¼Œæ‰§è¡Œ `git pull` æ‹‰å–æœ€æ–°ä»£ç ï¼Œç„¶åé‡å¯æ— ç•ŒBNCRæ¡†æ¶ã€‚

## å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œå¾®ä¿¡ä½¿ç”¨æ¡æ¬¾ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚ 